<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.control.CheckBox?>

<AnchorPane prefHeight="700.0" prefWidth="1000.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.banksimulation.view.AdminDashboardController">
    <children>
        <VBox alignment="CENTER" prefHeight="700.0" prefWidth="1000.0" spacing="35.0" style="-fx-background-color: #F8F8F8;" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
            <padding>
                <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
            </padding>
            <Label text="管理员仪表板" textFill="#2c3e50">
                <font>
                    <Font name="System Bold" size="30.0" />
                </font>
            </Label>
            <Label fx:id="welcomeLabel" text="欢迎，管理员 [用户名]！" textFill="#34495e">
                <font>
                    <Font size="18.0" />
                </font>
            </Label>
            <TabPane prefHeight="580.0" prefWidth="960.0" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS" style="-fx-tab-min-width: 150px; -fx-tab-max-width: 150px;">
                <tabs>
                    <Tab text="用户管理">
                        <content>
                            <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="180.0" prefWidth="200.0">
                                <children>
                                    <VBox alignment="TOP_CENTER" layoutX="10.0" layoutY="10.0" prefHeight="400.0" prefWidth="760.0" spacing="35.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0"> <children>
                                        <HBox alignment="CENTER" spacing="10.0">
                                            <Button onAction="#refreshUserList" style="-fx-background-color: #5DADE2; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 0);" text="刷新用户列表" />
                                            <Button onAction="#handleCreateUser" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 0);" text="创建新用户" />
                                        </HBox>
                                        <TableView fx:id="userTable" prefHeight="200.0" prefWidth="200.0" VBox.vgrow="ALWAYS">
                                            <columns>
                                                <TableColumn fx:id="colUserId" prefWidth="150.0" text="用户ID" />
                                                <TableColumn fx:id="colUsername" prefWidth="120.0" text="用户名" />
                                                <TableColumn fx:id="colFirstName" prefWidth="100.0" text="名" />
                                                <TableColumn fx:id="colLastName" prefWidth="100.0" text="姓" />
                                                <TableColumn fx:id="colAccountNumber" prefWidth="150.0" text="账号" />
                                                <TableColumn fx:id="colBalance" prefWidth="100.0" text="余额" />
                                                <TableColumn fx:id="colIsActive" prefWidth="80.0" text="激活" />
                                                <TableColumn fx:id="colCanDeposit" prefWidth="80.0" text="可存款" />
                                                <TableColumn fx:id="colCanWithdraw" prefWidth="80.0" text="可取款" />
                                            </columns>
                                        </TableView>
                                        <HBox alignment="CENTER" spacing="10.0">
                                            <Button onAction="#handleToggleActive" style="-fx-background-color: #F39C12; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 0);" text="切换激活状态" />
                                            <Button onAction="#handleModifyPermissions" style="-fx-background-color: #9B59B6; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 0);" text="修改权限" />
                                            <Button onAction="#handleDeleteUser" style="-fx-background-color: #E74C3C; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 0);" text="删除用户" />
                                        </HBox>
                                        <Label fx:id="userManagementMessageLabel" textFill="RED" />
                                    </children>
                                    </VBox>
                                </children>
                            </AnchorPane>
                        </content>
                    </Tab>
                    <Tab text="日志查看">
                        <content>
                            <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="180.0" prefWidth="200.0">
                                <children>
                                    <VBox alignment="TOP_CENTER" layoutX="10.0" layoutY="10.0" prefHeight="400.0" prefWidth="760.0" spacing="35.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0"> <children>
                                        <HBox alignment="CENTER" spacing="10.0">
                                            <Button onAction="#refreshLogs" style="-fx-background-color: #5DADE2; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 0);" text="刷新日志" />
                                            <Button onAction="#handleExportLogs" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 0);" text="导出日志 (CSV)" />
                                        </HBox>
                                        <TableView fx:id="logTable" prefHeight="200.0" prefWidth="200.0" VBox.vgrow="ALWAYS">
                                            <columns>
                                                <TableColumn fx:id="colLogTimestamp" prefWidth="150.0" text="时间" />
                                                <TableColumn fx:id="colActorUsername" prefWidth="100.0" text="操作者" />
                                                <TableColumn fx:id="colActorType" prefWidth="80.0" text="类型" />
                                                <TableColumn fx:id="colAction" prefWidth="150.0" text="操作" />
                                                <TableColumn fx:id="colDetails" prefWidth="250.0" text="详情" />
                                            </columns>
                                        </TableView>
                                        <Label fx:id="logMessageLabel" textFill="RED" />
                                    </children>
                                    </VBox>
                                </children>
                            </AnchorPane>
                        </content>
                    </Tab>
                </tabs>
            </TabPane>
            <HBox alignment="CENTER" spacing="20.0">
                <Button onAction="#handleLogout" style="-fx-background-color: #95A5A6; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 10 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 0);" text="注销" />
            </HBox>
        </VBox>
    </children>
</AnchorPane>
